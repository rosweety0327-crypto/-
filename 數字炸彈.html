<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ç›Šæ™ºæ•¸å­—ç‚¸å½ˆ PK æˆ°</title>
    <style>
        :root {
            --p1-color: #ff4757;
            --p2-color: #2e86de;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #2f3542;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }
        .game-card {
            background: #57606f;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            width: 400px;
        }
        .range-display {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            color: #eccc68;
        }
        .player-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .player-box {
            padding: 10px;
            border-radius: 10px;
            border: 2px solid transparent;
        }
        .active { border-color: #7bed9f; background: rgba(123, 237, 159, 0.2); }
        
        .avatar { font-size: 40px; display: block; }
        
        input {
            width: 80px;
            padding: 10px;
            font-size: 20px;
            border-radius: 5px;
            border: none;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            transition: 0.3s;
            margin: 5px;
        }
        .btn-guess { background: #7bed9f; color: #2f3542; font-weight: bold; }
        .btn-update { background: #ffa502; color: white; font-size: 12px; }

        .score-board { margin-top: 20px; border-top: 1px solid #747d8c; padding-top: 10px; }
    </style>
</head>
<body>

    <div class="game-card">
        <h2>ğŸ’£ æ•¸å­—ç‚¸å½ˆ PK ğŸ’£</h2>
        
        <div class="player-info">
            <div id="p1-ui" class="player-box active">
                <span id="p1-avatar" class="avatar">ğŸ</span>
                <span>ç©å®¶ 1</span>
            </div>
            <div id="p2-ui" class="player-box">
                <span id="p2-avatar" class="avatar">ğŸ«</span>
                <span>ç©å®¶ 2</span>
            </div>
        </div>

        <div class="range-display" id="rangeText">1 - 100</div>
        
        <div>
            <input type="number" id="guessInput" placeholder="æ•¸å­—">
            <button class="btn-guess" onclick="makeGuess()">æäº¤</button>
        </div>

        <p id="message">è«‹ Player 1 é–‹å§‹ï¼</p>

        <div class="score-board">
            <div>ğŸ† å‹å ´ç´€éŒ„ (ä¸éš¨æ›´æ–°æ¸…é™¤)</div>
            <div>P1: <span id="p1-wins">0</span> | P2: <span id="p2-wins">0</span></div>
            <button class="btn-update" onclick="updateCharacters()">âœ¨ æ›´æ–°æ–°è§’è‰² (ä¿ç•™ç´€éŒ„)</button>
        </div>
    </div>

    <script>
        let bomb = Math.floor(Math.random() * 100) + 1;
        let min = 1;
        let max = 100;
        let currentPlayer = 1;
        let p1Wins = localStorage.getItem('p1Wins') || 0;
        let p2Wins = localStorage.getItem('p2Wins') || 0;

        // åˆå§‹åŒ–åˆ†æ•¸
        document.getElementById('p1-wins').innerText = p1Wins;
        document.getElementById('p2-wins').innerText = p2Wins;

        function makeGuess() {
            const input = document.getElementById('guessInput');
            const val = parseInt(input.value);
            const msg = document.getElementById('message');

            if (isNaN(val) || val <= min || val >= max) {
                alert(`è«‹è¼¸å…¥ ${min} åˆ° ${max} ä¹‹é–“çš„æ•¸å­—ï¼`);
                return;
            }

            if (val === bomb) {
                msg.innerHTML = `<span style="color:red">ğŸ’¥ çˆ†ç‚¸ï¼ç©å®¶ ${currentPlayer} è¼¸äº†ï¼</span>`;
                updateScore(currentPlayer === 1 ? 2 : 1);
                resetGame();
            } else {
                if (val < bomb) min = val;
                else max = val;
                
                document.getElementById('rangeText').innerText = `${min} - ${max}`;
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                msg.innerText = `è¼ªåˆ° ç©å®¶ ${currentPlayer} äº†...`;
                updateUI();
            }
            input.value = '';
        }

        function updateUI() {
            document.getElementById('p1-ui').classList.toggle('active', currentPlayer === 1);
            document.getElementById('p2-ui').classList.toggle('active', currentPlayer === 2);
        }

        function updateScore(winner) {
            if (winner === 1) {
                p1Wins++;
                localStorage.setItem('p1Wins', p1Wins);
            } else {
                p2Wins++;
                localStorage.setItem('p2Wins', p2Wins);
            }
            document.getElementById('p1-wins').innerText = p1Wins;
            document.getElementById('p2-wins').innerText = p2Wins;
        }

        function resetGame() {
            setTimeout(() => {
                bomb = Math.floor(Math.random() * 100) + 1;
                min = 1;
                max = 100;
                document.getElementById('rangeText').innerText = `1 - 100`;
                document.getElementById('message').innerText = "æ–°ä¸€è¼ªé–‹å§‹ï¼";
            }, 2000);
        }

        // æ ¸å¿ƒåŠŸèƒ½ï¼šæ›´æ–°æ–°è§’è‰²è€Œä¸å½±éŸ¿åˆ†æ•¸
        function updateCharacters() {
            const avatars = ['ğŸ„', 'â­', 'ğŸ”¥', 'ğŸ’§', 'âš¡', 'ğŸ²', 'ğŸ¤¡', 'ğŸ¤–'];
            const rand1 = avatars[Math.floor(Math.random() * avatars.length)];
            const rand2 = avatars[Math.floor(Math.random() * avatars.length)];
            
            document.getElementById('p1-avatar').innerText = rand1;
            document.getElementById('p2-avatar').innerText = rand2;
            
            // æç¤ºç”¨æˆ¶ç´€éŒ„å·²ä¿ç•™
            const msg = document.getElementById('message');
            msg.innerText = "è§’è‰²å·²æ›´æ–°ï¼ç´€éŒ„å·²å®‰å…¨ä¿ç•™ã€‚";
        }
    </script>
</body>
</html>